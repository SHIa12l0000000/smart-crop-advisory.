<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Crop Advisory App</title>
<style>
body { font-family: "Segoe UI", Arial, sans-serif; margin: 0; background: #f0fdf4; color: #222; }
header, footer { text-align: center; padding: 1rem; background: #16a34a; color: white; }
header img { width: 40px; vertical-align: middle; margin-right: 8px; }
header h1 { margin: 0; font-size: 1.5rem; display: inline-block; vertical-align: middle; }
main { max-width: 700px; margin: auto; padding: 1rem; }
section { background: white; border-radius: 16px; padding: 1rem 1.2rem; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: none; animation: fade 0.3s ease-in-out; }
h2 { font-size: 1.2rem; margin-bottom: .5rem; color: #166534; }
form input, form select { width: 100%; padding: 10px; margin: 6px 0; border: 1px solid #ccc; border-radius: 10px; font-size: .95rem; }
button { padding: 10px 16px; border: none; border-radius: 10px; cursor: pointer; font-size: .95rem; transition: 0.2s; }
.btn-primary { background: #16a34a; color: white; }
.btn-primary:hover { background: #15803d; }
.btn-secondary { background: #f3f4f6; color: #111; margin-left: 6px; }
.advisory { border: 1px solid #e5e7eb; padding: 10px; margin-top: 10px; border-radius: 10px; background: #f9fafb; }
.advisory h3 { margin: 0; font-size: 1rem; color: #166534; }
ul { margin: 0.5rem 0 0; padding-left: 20px; }
footer { font-size: 0.8rem; }
#home { display: block; text-align: center; }
.menu-btn { display: block; width: 100%; margin: 10px 0; padding: 14px; font-size: 1rem; border-radius: 12px; border: none; cursor: pointer; background: #16a34a; color: white; transition: 0.2s; }
.menu-btn:hover { background: #15803d; }
#splash { position: fixed; top:0; left:0; right:0; bottom:0; background: #16a34a; color: white; display:flex; flex-direction: column; align-items: center; justify-content: center; font-size: 1.3rem; z-index: 9999; animation: fadeIn 1s; }
#splash img { width: 70px; margin-bottom: 10px; }
@keyframes fade { from {opacity:0;} to {opacity:1;} }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>

<!-- Splash Screen -->
<div id="splash">
<img src="logo.png" alt="Logo" />
<div>Smart Crop Advisory</div>
<small>Loading...</small>
</div>

<header>
<img src="logo.png" alt="Logo" />
<h1>Smart Crop Advisory</h1>
</header>

<main>
<!-- Language Selection -->
<section id="language">
<h2>Select Language ğŸŒ</h2>
<select id="langSelect">
<option value="en">English</option>
<option value="hi">Hindi</option>
</select>
<br><br>
<button class="btn-primary" onclick="setLanguage()">âœ… Confirm Language</button>
</section>

<!-- Home Screen -->
<section id="home">
<h2 id="homeTitle">Welcome ğŸ‘‹</h2>
<p id="homeText">Select an option below:</p>
<button class="menu-btn" onclick="showPage('input')" id="btnInput">ğŸ‘¨â€ğŸŒ¾ Farmer Input</button>
<button class="menu-btn" onclick="showPage('advisories')" id="btnAdvisory">ğŸ“‹ Advisories</button>
<button class="menu-btn" onclick="showPage('roadmap')" id="btnRoadmap">ğŸš€ Roadmap</button>
</section>

<!-- Farmer Input Section -->
<section id="input">
<h2 id="inputTitle">ğŸ‘¨â€ğŸŒ¾ Farmer Input</h2>
<form id="farmerForm">
<label id="labelName">Name</label>
<input type="text" name="name" required placeholder="Farmer name" />

<label id="labelPhone">Phone (for SMS/IVR)</label>
<input type="text" name="phone" required placeholder="91XXXXXXXXXX" />

<label id="labelDistrict">District</label>
<input type="text" name="district" placeholder="District" />

<label id="labelArea">Area (acres)</label>
<input type="number" name="area" step="0.1" value="1" />

<label id="labelSoil">Soil Type</label>
<select name="soil">
<option>Loamy</option>
<option>Sandy</option>
<option>Clay</option>
<option>Laterite</option>
</select>

<label id="labelCrop">Crop</label>
<input type="text" name="crop" id="cropInput" value="Wheat" />

<br><br>
<button type="submit" class="btn-primary" id="btnGetAdvisory">âœ¨ Get Advisory</button>
<button type="reset" class="btn-secondary" id="btnReset">Reset</button>
<button type="button" class="btn-secondary" id="btnBack" onclick="showPage('home')">â¬… Back</button>
<button type="button" class="btn-secondary" onclick="startVoice()">ğŸ¤ Voice Input</button>
</form>
</section>

<!-- Advisory Section -->
<section id="advisories">
<h2 id="advisoryTitle">ğŸ“‹ Advisories</h2>
<div id="advisoryList">No advisories yet â€” fill the form and click "Get Advisory".</div>
<br />
<button class="btn-secondary" onclick="showPage('home')" id="btnBackAdvisory">â¬… Back</button>
</section>

<!-- Roadmap Section -->
<section id="roadmap">
<h2 id="roadmapTitle">ğŸš€ Feature Roadmap</h2>
<ul>
<li>App + SMS + IVR + Local language voice messages</li>
<li>IoT sensors for soil moisture / pH</li>
<li>Weather + Soil + Satellite data â†’ AI model</li>
<li>Market prices, buyer connect, storage tips</li>
<li>Offline SMS digests for low connectivity</li>
<li>Training & onboarding for farmers</li>
</ul>
<br />
<button class="btn-secondary" onclick="showPage('home')">â¬… Back</button>
</section>
</main>

<footer>
Prototype â€” Built for Smart India Hackathon idea submission.<br/>
For production: connect sensors, weather API & backend AI.
</footer>

<script>
// Splash screen
window.addEventListener("load", () => {
    setTimeout(() => {
        document.getElementById("splash").style.display = "none";
        showPage("language");
    }, 1500);
});

const pages = ["home","input","advisories","roadmap","language"];
let currentLang = "en";

const uiTrans = {
  en: { homeTitle:"Welcome ğŸ‘‹", homeText:"Select an option below:", btnInput:"ğŸ‘¨â€ğŸŒ¾ Farmer Input", btnAdvisory:"ğŸ“‹ Advisories", btnRoadmap:"ğŸš€ Roadmap", inputTitle:"ğŸ‘¨â€ğŸŒ¾ Farmer Input", labelName:"Name", labelPhone:"Phone (for SMS/IVR)", labelDistrict:"District", labelArea:"Area (acres)", labelSoil:"Soil Type", labelCrop:"Crop", btnGetAdvisory:"âœ¨ Get Advisory", btnReset:"Reset", thanks:"Thanks for using our website! It will help you a lot." },
  hi: { homeTitle:"à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ ğŸ‘‹", homeText:"à¤¨à¥€à¤šà¥‡ à¤µà¤¿à¤•à¤²à¥à¤ª à¤šà¥à¤¨à¥‡à¤‚:", btnInput:"ğŸ‘¨â€ğŸŒ¾ à¤•à¤¿à¤¸à¤¾à¤¨ à¤‡à¤¨à¤ªà¥à¤Ÿ", btnAdvisory:"ğŸ“‹ à¤¸à¤²à¤¾à¤¹", btnRoadmap:"ğŸš€ à¤°à¥‹à¤¡à¤®à¥ˆà¤ª", inputTitle:"ğŸ‘¨â€ğŸŒ¾ à¤•à¤¿à¤¸à¤¾à¤¨ à¤‡à¤¨à¤ªà¥à¤Ÿ", labelName:"à¤¨à¤¾à¤®", labelPhone:"à¤«à¥‹à¤¨ (SMS/IVR à¤•à¥‡ à¤²à¤¿à¤)", labelDistrict:"à¤œà¤¿à¤²à¤¾", labelArea:"à¤•à¥à¤·à¥‡à¤¤à¥à¤° (à¤à¤•à¤¡à¤¼)", labelSoil:"à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤•à¤¾ à¤ªà¥à¤°à¤•à¤¾à¤°", labelCrop:"à¤«à¤¸à¤²", btnGetAdvisory:"âœ¨ à¤¸à¤²à¤¾à¤¹ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚", btnReset:"à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚", thanks:"à¤¹à¤®à¤¾à¤°à¥€ à¤µà¥‡à¤¬à¤¸à¤¾à¤‡à¤Ÿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤§à¤¨à¥à¤¯à¤µà¤¾à¤¦! à¤¯à¤¹ à¤†à¤ªà¤•à¥€ à¤¬à¤¹à¥à¤¤ à¤®à¤¦à¤¦ à¤•à¤°à¥‡à¤—à¤¾à¥¤" }
};

const advTrans = {
  en: { wheat1:"Apply nitrogen fertilizer", wheat2:"Monitor irrigation regularly", rice1:"Keep fields flooded", rice2:"Check for pests", general:"Follow standard crop practices", soilSandy:"Add compost to sandy soil", largeArea:"Consider hiring extra labor", market:"Check local market prices before selling", wheatTitle:"Wheat Advisory", riceTitle:"Rice Advisory", generalTitle:"Crop Advisory" },
  hi: { wheat1:"à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨ à¤‰à¤°à¥à¤µà¤°à¤• à¤¡à¤¾à¤²à¥‡à¤‚", wheat2:"à¤¸à¤¿à¤‚à¤šà¤¾à¤ˆ à¤¨à¤¿à¤¯à¤®à¤¿à¤¤ à¤°à¥‚à¤ª à¤¸à¥‡ à¤•à¤°à¥‡à¤‚", rice1:"à¤–à¥‡à¤¤à¥‹à¤‚ à¤•à¥‹ à¤ªà¤¾à¤¨à¥€ à¤¸à¥‡ à¤­à¤°à¥‡à¤‚", rice2:"à¤•à¥€à¤Ÿà¥‹à¤‚ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚", general:"à¤®à¤¾à¤¨à¤• à¤«à¤¸à¤² à¤ªà¥à¤°à¤¥à¤¾à¤“à¤‚ à¤•à¤¾ à¤ªà¤¾à¤²à¤¨ à¤•à¤°à¥‡à¤‚", soilSandy:"à¤°à¥‡à¤¤à¥€à¤²à¥€ à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤®à¥‡à¤‚ à¤•à¤‚à¤ªà¥‹à¤¸à¥à¤Ÿ à¤¡à¤¾à¤²à¥‡à¤‚", largeArea:"à¤…à¤¤à¤¿à¤°à¤¿à¤•à¥à¤¤ à¤¶à¥à¤°à¤® à¤²à¥‡à¤¨à¥‡ à¤ªà¤° à¤µà¤¿à¤šà¤¾à¤° à¤•à¤°à¥‡à¤‚", market:"à¤¬à¥‡à¤šà¤¨à¥‡ à¤¸à¥‡ à¤ªà¤¹à¤²à¥‡ à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ à¤¬à¤¾à¤œà¤¾à¤° à¤•à¥‡ à¤¦à¤¾à¤® à¤¦à¥‡à¤–à¥‡à¤‚", wheatTitle:"à¤—à¥‡à¤¹à¥‚à¤‚ à¤¸à¤²à¤¾à¤¹", riceTitle:"à¤šà¤¾à¤µà¤² à¤¸à¤²à¤¾à¤¹", generalTitle:"à¤«à¤¸à¤² à¤¸à¤²à¤¾à¤¹" }
};

// Show/hide pages
function showPage(id){
    pages.forEach(p => document.getElementById(p).style.display="none");
    document.getElementById(id).style.display="block";
}

// Set language
function setLanguage(){
    currentLang = document.getElementById("langSelect").value;
    for(const key in uiTrans[currentLang]){
        let el = document.getElementById(key);
        if(el) el.innerText = uiTrans[currentLang][key];
    }
    showPage("home");
}

// Advisory generation
const form = document.getElementById("farmerForm");
const list = document.getElementById("advisoryList");
form.addEventListener("submit", e=>{
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form));
    const adv = generateAdvisory(data);
    list.innerHTML = adv + `<p style="margin-top:10px; color:#16a34a;">${uiTrans[currentLang].thanks}</p>`;
    showPage("advisories");
});
function generateAdvisory(data){
    let tips=[];
    const crop = data.crop.toLowerCase();
    let title = advTrans[currentLang].generalTitle;
    if(crop.includes("wheat")){
        tips.push(advTrans[currentLang].wheat1, advTrans[currentLang].wheat2);
        title = advTrans[currentLang].wheatTitle;
    } else if(crop.includes("rice")){
        tips.push(advTrans[currentLang].rice1, advTrans[currentLang].rice2);
        title = advTrans[currentLang].riceTitle;
    } else {
        tips.push(advTrans[currentLang].general, advTrans[currentLang].general);
    }
    if(data.soil.toLowerCase().includes("sandy")) tips.push(advTrans[currentLang].soilSandy);
    if(parseFloat(data.area) > 5) tips.push(advTrans[currentLang].largeArea);
    tips.push(advTrans[currentLang].market);
    return `<div class='advisory'><h3>${title}</h3><ul>${tips.map(t=>`<li>${t}</li>`).join("")}</ul></div>`;
}

// Auto-retry voice input
function startVoice(){
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SpeechRecognition){ alert("Voice input not supported!"); return; }

    const activeInput = document.activeElement;
    if(!activeInput || activeInput.tagName !== "INPUT"){ alert("Please tap on a field to use voice input."); return; }

    activeInput.blur();

    let recognition = new SpeechRecognition();
    recognition.lang = currentLang === "hi" ? "hi-IN" : "en-US";
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onresult = function(event){
        activeInput.value = event.results[0][0].transcript;
        activeInput.focus();
    };

    recognition.onerror = function(event){
        if(event.error === "no-speech"){
            recognition.stop();
            setTimeout(()=>{ startVoice(); }, 500); // auto-retry
        } else {
            alert("Voice recognition error: " + event.error);
        }
    };

    recognition.onend = function(){
        // If input still empty, retry automatically
        if(activeInput.value.trim() === "") setTimeout(()=>{ startVoice(); }, 300);
    };

    recognition.start();
}
</script>
</body>
</html>
