<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Crop Advisory App</title>
<style>
body { font-family: "Segoe UI", Arial, sans-serif; margin: 0; background: #f0fdf4; color: #222; transition:0.3s;}
body.dark { background: #121212; color: #f0f0f0; }
header, footer { text-align: center; padding: 1rem; background: #16a34a; color: white; transition:0.3s;}
body.dark header, body.dark footer { background:#0f4d29; color:white; }
header img { width: 40px; vertical-align: middle; margin-right: 8px; }
header h1 { margin: 0; font-size: 1.5rem; display: inline-block; vertical-align: middle; }
main { max-width: 700px; margin: auto; padding: 1rem; }
section { background: white; border-radius: 16px; padding: 1rem 1.2rem; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: none; animation: fade 0.3s ease-in-out; transition:0.3s;}
body.dark section { background: #1e1e1e; color:#f0f0f0; box-shadow:none;}
h2 { font-size: 1.2rem; margin-bottom: .5rem; color: #166534; }
body.dark h2 { color:#a0f0a0; }
form input, form select { width: 100%; padding: 10px; margin: 6px 0; border: 1px solid #ccc; border-radius: 10px; font-size: .95rem; background:white; color:black; }
body.dark form input, body.dark form select { background:#2b2b2b; color:#f0f0f0; border:1px solid #555;}
button { padding: 10px 16px; border: none; border-radius: 10px; cursor: pointer; font-size: .95rem; transition: 0.2s; }
.btn-primary { background: #16a34a; color: white; }
.btn-primary:hover { background: #15803d; }
.btn-secondary { background: #f3f4f6; color: #111; margin-left: 6px; }
body.dark .btn-secondary { background:#2b2b2b; color:#f0f0f0;}
.advisory { border: 1px solid #e5e7eb; padding: 10px; margin-top: 10px; border-radius: 10px; background: #f9fafb; }
body.dark .advisory { border-color:#555; background:#2b2b2b; color:#f0f0f0; }
.advisory h3 { margin: 0; font-size: 1rem; color: #166534; }
body.dark .advisory h3 { color:#a0f0a0; }
ul { margin: 0.5rem 0 0; padding-left: 20px; }
footer { font-size: 0.8rem; text-align:center; }
#home { display: block; text-align: center; }
.menu-btn { display: block; width: 100%; margin: 10px 0; padding: 14px; font-size: 1rem; border-radius: 12px; border: none; cursor: pointer; background: #16a34a; color: white; transition: 0.2s; }
.menu-btn:hover { background: #15803d; }
#splash { position: fixed; top:0; left:0; right:0; bottom:0; background: #16a34a; color: white; display:flex; flex-direction: column; align-items: center; justify-content: center; font-size: 1.3rem; z-index: 9999; animation: fadeIn 1s; }
#splash img { width: 70px; margin-bottom: 10px; }
@keyframes fade { from {opacity:0;} to {opacity:1;} }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

/* Small corner buttons */
#langCorner, #darkToggle {
    position: fixed; top:10px; padding:6px 10px; border-radius:8px; cursor:pointer; font-size:0.85rem; font-weight:bold; z-index:1000; transition:0.3s;
}
#langCorner { left:10px; background:#16a34a; color:white;}
body.dark #langCorner { background:#0f4d29;}
#darkToggle { right:10px; background:#16a34a; color:white;}
body.dark #darkToggle { background:#0f4d29;}

/* Floating mic button */
#voiceButton { position:fixed; bottom:20px; right:20px; font-size:1.2rem; padding:10px 14px; border-radius:50%; background:#16a34a; color:white; border:none; cursor:pointer; z-index:1000; transition:0.2s; box-shadow:0 0 5px #16a34a;}
#voiceButton.listening { animation: pulse 1s infinite; }
@keyframes pulse {
  0% { box-shadow:0 0 5px #16a34a; }
  50% { box-shadow:0 0 15px #16a34a; }
  100% { box-shadow:0 0 5px #16a34a; }
}
</style>
</head>
<body>

<!-- Splash Screen -->
<div id="splash">
<img src="logo.png" alt="Logo" />
<div>Smart Crop Advisory</div>
<small>Loading...</small>
</div>

<header>
<img src="logo.png" alt="Logo" />
<h1>Smart Crop Advisory</h1>
</header>

<!-- Language & Dark Mode Buttons -->
<div id="langCorner" onclick="showPage('language')">üåê Language</div>
<div id="darkToggle" onclick="toggleDark()">üåô Dark</div>

<!-- Floating mic button -->
<button id="voiceButton">üé§</button>

<main>
<!-- Language Selection -->
<section id="language">
<h2>Select Language üåê</h2>
<select id="langSelect">
<option value="en">English</option>
<option value="hi">Hindi</option>
</select>
<br><br>
<button class="btn-primary" onclick="setLanguage()">‚úÖ Confirm Language</button>
</section>

<!-- Home Screen -->
<section id="home">
<h2 id="homeTitle">Welcome üëã</h2>
<p id="homeText">Select an option below:</p>
<button class="menu-btn" onclick="showPage('input')" id="btnInput">üë®‚Äçüåæ Farmer Input</button>
<button class="menu-btn" onclick="showPage('advisories')" id="btnAdvisory">üìã Advisories</button>
<button class="menu-btn" onclick="showPage('roadmap')" id="btnRoadmap">üöÄ Roadmap</button>
</section>

<!-- Farmer Input Section -->
<section id="input">
<h2 id="inputTitle">üë®‚Äçüåæ Farmer Input</h2>
<form id="farmerForm">
<label id="labelName">Name</label>
<input type="text" name="name" required placeholder="Farmer name" />

<label id="labelPhone">Phone (for SMS/IVR)</label>
<input type="tel" name="phone" required placeholder="91XXXXXXXXXX" pattern="[0-9]{10}" />

<label id="labelDistrict">District</label>
<input type="text" name="district" placeholder="District" />

<label id="labelArea">Area (acres)</label>
<input type="number" name="area" step="0.1" value="1" />

<label id="labelSoil">Soil Type</label>
<select name="soil" id="soilSelect">
<option value="Loamy">Loamy</option>
<option value="Sandy">Sandy</option>
<option value="Clay">Clay</option>
<option value="Laterite">Laterite</option>
</select>

<label id="labelCrop">Crop</label>
<input type="text" name="crop" id="cropInput" value="Wheat" placeholder="Wheat" />

<br><br>
<button type="submit" class="btn-primary" id="btnGetAdvisory">‚ú® Get Advisory</button>
<button type="reset" class="btn-secondary" id="btnReset">Reset</button>
<button type="button" class="btn-secondary" id="btnBack" onclick="showPage('home')">‚¨Ö Back</button>
</form>
</section>

<!-- Advisory Section -->
<section id="advisories">
<h2 id="advisoryTitle">üìã Advisories</h2>
<div id="advisoryList">No advisories yet ‚Äî fill the form and click "Get Advisory".</div>
<br />
<button class="btn-secondary" onclick="showPage('home')" id="btnBackAdvisory">‚¨Ö Back</button>
</section>

<!-- Roadmap Section -->
<section id="roadmap">
<h2 id="roadmapTitle">üöÄ Feature Roadmap</h2>
<ul>
<li>App + SMS + IVR + Local language voice messages</li>
<li>IoT sensors for soil moisture / pH</li>
<li>Weather + Soil + Satellite data ‚Üí AI model</li>
<li>Market prices, buyer connect, storage tips</li>
<li>Offline SMS digests for low connectivity</li>
<li>Training & onboarding for farmers</li>
</ul>
<br />
<button class="btn-secondary" onclick="showPage('home')">‚¨Ö Back</button>
</section>

<footer>
Prototype ‚Äî Built for Smart India Hackathon idea submission.<br/>
For production: connect sensors, weather API & backend AI.
</footer>

<script>
// Splash
window.addEventListener("load", () => { setTimeout(()=>{document.getElementById("splash").style.display="none"; showPage("language");},1500); });

const pages = ["home","input","advisories","roadmap","language"];
let currentLang = "en";
let activeInput = null;

// Dark mode
function toggleDark(){ document.body.classList.toggle("dark"); }

// Show page
function showPage(id){ pages.forEach(p=>document.getElementById(p).style.display="none"); document.getElementById(id).style.display="block"; }

// Translation
const uiTrans = { 
  en:{ homeTitle:"Welcome üëã", homeText:"Select an option below:", btnInput:"üë®‚Äçüåæ Farmer Input", btnAdvisory:"üìã Advisories", btnRoadmap:"üöÄ Roadmap", inputTitle:"üë®‚Äçüåæ Farmer Input", labelName:"Name", labelPhone:"Phone (for SMS/IVR)", labelDistrict:"District", labelArea:"Area (acres)", labelSoil:"Soil Type", labelCrop:"Crop", btnGetAdvisory:"‚ú® Get Advisory", btnReset:"Reset", cropPlaceholder:"Wheat", thanks:"Thanks for using our website! It will help you a lot."},
  hi:{ homeTitle:"‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à üëã", homeText:"‡§®‡•Ä‡§ö‡•á ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡•á‡§Ç:", btnInput:"üë®‚Äçüåæ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§á‡§®‡§™‡•Å‡§ü", btnAdvisory:"üìã ‡§∏‡§≤‡§æ‡§π", btnRoadmap:"üöÄ ‡§∞‡•ã‡§°‡§Æ‡•à‡§™", inputTitle:"üë®‚Äçüåæ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§á‡§®‡§™‡•Å‡§ü", labelName:"‡§®‡§æ‡§Æ", labelPhone:"‡§´‡•ã‡§® (SMS/IVR ‡§ï‡•á ‡§≤‡§ø‡§è)", labelDistrict:"‡§ú‡§ø‡§≤‡§æ", labelArea:"‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ (‡§è‡§ï‡§°‡§º)", labelSoil:"‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞", labelCrop:"‡§´‡§∏‡§≤", btnGetAdvisory:"‚ú® ‡§∏‡§≤‡§æ‡§π ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç", btnReset:"‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç", cropPlaceholder:"‡§ó‡•á‡§π‡•Ç‡§Ç", thanks:"‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ø‡§π ‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§"}
};

// Soil translation
const soilTrans = { en:["Loamy","Sandy","Clay","Laterite"], hi:["‡§≤‡•â‡§Æ‡•Ä","‡§∞‡•á‡§§‡•Ä‡§≤‡•Ä","‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä","‡§≤‡•á‡§ü‡§∞‡§æ‡§á‡§ü"] };

// Advisory translation
const advTrans = {
  en:{ wheat1:"Apply nitrogen fertilizer", wheat2:"Monitor irrigation regularly", rice1:"Keep fields flooded", rice2:"Check for pests", general:"Follow standard crop practices", soilSandy:"Add compost to sandy soil", largeArea:"Consider hiring extra labor", market:"Check local market prices before selling", wheatTitle:"Wheat Advisory", riceTitle:"Rice Advisory", generalTitle:"Crop Advisory"},
  hi:{ wheat1:"‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç", wheat2:"‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç", rice1:"‡§ñ‡•á‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§æ‡§®‡•Ä ‡§∏‡•á ‡§≠‡§∞‡•á‡§Ç", rice2:"‡§ï‡•Ä‡§ü‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç", general:"‡§Æ‡§æ‡§®‡§ï ‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§•‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞‡•á‡§Ç", soilSandy:"‡§∞‡•á‡§§‡•Ä‡§≤‡•Ä ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§Ç‡§™‡•ã‡§∏‡•ç‡§ü ‡§°‡§æ‡§≤‡•á‡§Ç", largeArea:"‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∂‡•ç‡§∞‡§Æ ‡§≤‡•á‡§®‡•á ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç", market:"‡§¨‡•á‡§ö‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•á ‡§¶‡§æ‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç", wheatTitle:"‡§ó‡•á‡§π‡•Ç‡§Ç ‡§∏‡§≤‡§æ‡§π", riceTitle:"‡§ö‡§æ‡§µ‡§≤ ‡§∏‡§≤‡§æ‡§π", generalTitle:"‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π"}
};

// Set language
function setLanguage(){
    currentLang = document.getElementById("langSelect").value;
    document.querySelectorAll("[id]").forEach(el=>{
        if(uiTrans[currentLang][el.id]) el.innerText = uiTrans[currentLang][el.id];
    });
    // Update placeholders
    document.getElementById("cropInput").placeholder = uiTrans[currentLang].cropPlaceholder;
    // Update soil options
    let soilSelect = document.getElementById("soilSelect");
    soilSelect.innerHTML = "";
    soilTrans[currentLang].forEach(s=>{ let opt=document.createElement("option"); opt.text=s; soilSelect.add(opt); });
    showPage("home");
}

// Advisory generation
const form = document.getElementById("farmerForm");
const list = document.getElementById("advisoryList");
form.addEventListener("submit", e=>{
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form));
    const adv = generateAdvisory(data);
    list.innerHTML = adv + `<p style="margin-top:10px;font-style:italic;">${uiTrans[currentLang].thanks}</p>`;
    showPage("advisories");
});
function generateAdvisory(data){
    let tips=[];
    let cropLower = data.crop.toLowerCase();
    if(cropLower.includes(currentLang==='hi'?'‡§ó‡•á‡§π‡•Ç‡§Ç':'wheat')) { tips.push(advTrans[currentLang].wheat1, advTrans[currentLang].wheat2); }
    else if(cropLower.includes(currentLang==='hi'?'‡§ö‡§æ‡§µ‡§≤':'rice')) { tips.push(advTrans[currentLang].rice1, advTrans[currentLang].rice2); }
    else { tips.push(advTrans[currentLang].general, advTrans[currentLang].general); }
    if(data.soil.toLowerCase().includes(currentLang==='hi'?'‡§∞‡•á‡§§‡•Ä‡§≤‡•Ä':'sandy')) tips.push(advTrans[currentLang].soilSandy);
    if(parseFloat(data.area)>5) tips.push(advTrans[currentLang].largeArea);
    tips.push(advTrans[currentLang].market);
    let title = advTrans[currentLang].generalTitle;
    if(cropLower.includes(currentLang==='hi'?'‡§ó‡•á‡§π‡•Ç‡§Ç':'wheat')) title=advTrans[currentLang].wheatTitle;
    if(cropLower.includes(currentLang==='hi'?'‡§ö‡§æ‡§µ‡§≤':'rice')) title=advTrans[currentLang].riceTitle;
    return `<div class='advisory'><h3>${title}</h3><ul>${tips.map(t=>`<li>${t}</li>`).join("")}</ul></div>`;
}

// Voice input
document.querySelectorAll("input[type=text], input[type=tel]").forEach(inp=>{
    inp.addEventListener("focus", ()=>{ activeInput = inp; });
});
document.getElementById("voiceButton").addEventListener("click", ()=>{
    if(!activeInput){ alert(currentLang==='hi'?"‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§™‡§∞ ‡§ü‡•à‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§":"Please tap on a field to enter text via voice"); return; }
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SpeechRecognition){ alert("Voice input not supported!"); return; }
    let recognition = new SpeechRecognition();
    recognition.lang = currentLang==='hi'?'hi-IN':'en-US';
    recognition.interimResults=false;
    recognition.maxAlternatives=1;
    recognition.start();
    document.getElementById("voiceButton").classList.add("listening");
    recognition.onresult=function(event){ activeInput.value = event.results[0][0].transcript; };
    recognition.onerror=function(event){ alert("Voice recognition error: "+event.error); };
    recognition.onend=function(){ document.getElementById("voiceButton").classList.remove("listening"); };
});
</script>
</body>
</html>
