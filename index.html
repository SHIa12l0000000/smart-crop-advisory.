<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Crop Advisory App</title>
<style>
body { font-family:"Segoe UI", Arial, sans-serif; margin:0; background:#f0fdf4; color:#222; transition:0.3s; }
body.dark { background:#111; color:#eee; }
header, footer { text-align:center; padding:1rem; background:#16a34a; color:white; position:relative; }
header img { width:40px; vertical-align:middle; margin-right:8px; }
header h1 { margin:0; font-size:1.5rem; display:inline-block; vertical-align:middle; }
#langCorner { position:absolute; left:10px; top:50%; transform:translateY(-50%); font-size:0.8rem; background:#fff; color:#16a34a; border-radius:6px; padding:2px 6px; cursor:pointer; }
body.dark #langCorner { background:#333; color:#a5f3fc; }
main { max-width:700px; margin:auto; padding:1rem; }
section { background:white; border-radius:16px; padding:1rem 1.2rem; box-shadow:0 4px 10px rgba(0,0,0,0.05); display:none; animation:fade 0.3s ease-in-out; margin-bottom:1rem; }
body.dark section { background:#222; color:#eee; box-shadow:none; }
h2 { font-size:1.2rem; margin-bottom:.5rem; color:#166534; }
body.dark h2 { color:#a5f3fc; }
form input, form select { width:100%; padding:8px; margin:4px 0; border:1px solid #ccc; border-radius:8px; font-size:.95rem; }
body.dark form input, body.dark form select { background:#333; color:#eee; border:1px solid #555; }
button { padding:8px 12px; border:none; border-radius:8px; cursor:pointer; font-size:.9rem; transition:0.2s; }
.btn-primary { background:#16a34a; color:white; }
.btn-primary:hover { background:#15803d; }
.btn-secondary { background:#f3f4f6; color:#111; margin-left:4px; }
body.dark .btn-secondary { background:#444; color:#eee; }
.advisory { border:1px solid #e5e7eb; padding:10px; margin-top:10px; border-radius:10px; background:#f9fafb; }
body.dark .advisory { background:#333; border:1px solid #555; }
.advisory h3 { margin:0; font-size:1rem; color:#166534; }
body.dark .advisory h3 { color:#a5f3fc; }
ul { margin:0.5rem 0 0; padding-left:20px; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #999; padding:6px; text-align:left; }
body.dark th, body.dark td { border:1px solid #666; }
#splash { position:fixed; top:0; left:0; right:0; bottom:0; background:#16a34a; color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:1.3rem; z-index:9999; animation:fadeIn 1s; }
#splash img { width:70px; margin-bottom:10px; }
.btn-line { display:flex; flex-wrap:wrap; gap:4px; margin-top:8px; }
#voiceButtonInline { background:#ef4444; color:white; }
#voiceButtonInline.listening { background:#facc15; color:#111; }
@keyframes fade { from {opacity:0;} to {opacity:1;} }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>

<div id="splash">
<img src="logo.png" alt="Logo" />
<div>Smart Crop Advisory</div>
<small>Loading...</small>
</div>

<header>
<img src="logo.png" alt="Logo" />
<h1>Smart Crop Advisory</h1>
<div id="langCorner">ЁЯМР</div>
</header>

<main>

<section id="language">
<h2>Select Language ЁЯМР</h2>
<select id="langSelect">
<option value="en">English</option>
<option value="hi">Hindi</option>
</select>
<br><br>
<button class="btn-primary" onclick="setLanguage()">тЬЕ Confirm Language</button>
</section>

<section id="home">
<h2 id="homeTitle">Welcome ЁЯСЛ</h2>
<p id="homeText">Select an option below:</p>
<button class="btn-primary" onclick="showPage('input')" id="btnInput">ЁЯСитАНЁЯМ╛ Farmer Input</button>
<button class="btn-primary" onclick="showPage('advisories')" id="btnAdvisory">ЁЯУЛ Advisories</button>
<button class="btn-primary" onclick="showPage('roadmap')" id="btnRoadmap">ЁЯЪА Roadmap</button>
</section>

<section id="input">
<h2 id="inputTitle">ЁЯСитАНЁЯМ╛ Farmer Input</h2>
<form id="farmerForm">
<label id="labelName">Name</label>
<input type="text" name="name" placeholder="Farmer name" />

<label id="labelPhone">Phone (SMS/IVR)</label>
<input type="tel" name="phone" placeholder="91XXXXXXXXXX" />

<label id="labelDistrict">District</label>
<input type="text" name="district" placeholder="District" />

<label id="labelArea">Area (acres)</label>
<input type="number" name="area" step="0.1" value="1" />

<label id="labelSoil">Soil Type</label>
<select name="soil" id="soilSelect"></select>

<label id="labelCrop">Crop</label>
<input type="text" name="crop" id="cropInput" value="Wheat" />

<div class="btn-line">
<button type="submit" class="btn-primary" id="btnGetAdvisory">тЬи Get Advisory</button>
<button type="button" class="btn-secondary" id="voiceButtonInline">ЁЯОд Voice Input</button>
<button type="reset" class="btn-secondary" id="btnReset">Reset</button>
<button type="button" class="btn-secondary" onclick="showPage('home')">тмЕ Back</button>
</div>
</form>
</section>

<section id="advisories">
<h2 id="advisoryTitle">ЁЯУЛ Advisories</h2>
<div id="advisoryList">No advisories yet тАФ fill the form and click "Get Advisory".</div>
<br />
<button class="btn-secondary" onclick="showPage('home')" id="btnBackAdvisory">тмЕ Back</button>
</section>

<section id="roadmap">
<h2 id="roadmapTitle">ЁЯЪА Feature Roadmap</h2>
<ul>
<li>App + SMS + IVR + Local language voice messages</li>
<li>IoT sensors for soil moisture / pH</li>
<li>Weather + Soil + Satellite data тЖТ AI model</li>
<li>Market prices, buyer connect, storage tips</li>
<li>Offline SMS digests for low connectivity</li>
<li>Training & onboarding for farmers</li>
</ul>
<br />
<button class="btn-secondary" onclick="showPage('home')">тмЕ Back</button>
</section>

<footer>
Prototype тАФ Built for Smart India Hackathon idea submission.<br/>
For production: connect sensors, weather API & backend AI.
</footer>

<button id="darkToggle" class="btn-secondary" style="position:fixed; bottom:10px; right:10px;">ЁЯМУ Dark Mode</button>

<script>
let currentLang="en"; 
let activeInput=null;
const pages=["home","input","advisories","roadmap","language"];

const uiTrans={
en:{homeTitle:"Welcome ЁЯСЛ",homeText:"Select an option below:",btnInput:"ЁЯСитАНЁЯМ╛ Farmer Input",btnAdvisory:"ЁЯУЛ Advisories",btnRoadmap:"ЁЯЪА Roadmap",inputTitle:"ЁЯСитАНЁЯМ╛ Farmer Input",labelName:"Name",labelPhone:"Phone (SMS/IVR)",labelDistrict:"District",labelArea:"Area (acres)",labelSoil:"Soil Type",labelCrop:"Crop",btnGetAdvisory:"тЬи Get Advisory",btnReset:"Reset",thanks:"Thanks for using our website! It will help you a lot.",cropPlaceholder:"Wheat"},
hi:{homeTitle:"рд╕реНрд╡рд╛рдЧрдд ЁЯСЛ",homeText:"рдиреАрдЪреЗ рд╡рд┐рдХрд▓реНрдк рдЪреБрдиреЗрдВ:",btnInput:"ЁЯСитАНЁЯМ╛ рдХрд┐рд╕рд╛рди рдЗрдирдкреБрдЯ",btnAdvisory:"ЁЯУЛ рд╕рд▓рд╛рд╣",btnRoadmap:"ЁЯЪА рд░реЛрдбрдореИрдк",inputTitle:"ЁЯСитАНЁЯМ╛ рдХрд┐рд╕рд╛рди рдЗрдирдкреБрдЯ",labelName:"рдирд╛рдо",labelPhone:"рдлреЛрди (SMS/IVR рдХреЗ рд▓рд┐рдП)",labelDistrict:"рдЬрд┐рд▓рд╛",labelArea:"рдХреНрд╖реЗрддреНрд░рдлрд▓ (рдПрдХрдбрд╝)",labelSoil:"рдореГрджрд╛ рдкреНрд░рдХрд╛рд░",labelCrop:"рдлрд╕рд▓",btnGetAdvisory:"тЬи рд╕рд▓рд╛рд╣ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ",btnReset:"рд░реАрд╕реЗрдЯ",thanks:"рд╣рдорд╛рд░реА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред рдпрд╣ рдЖрдкрдХреЛ рдмрд╣реБрдд рдорджрдж рдХрд░реЗрдЧрд╛ред",cropPlaceholder:"рдЧреЗрд╣реВрдВ"}};

const soilTrans={ en:["Loamy","Sandy","Clay","Laterite"], hi:["рджреЛрдордЯ","рд░реЗрддреАрд▓реА","рдорд┐рдЯреНрдЯреА","рд▓реИрдЯрд░рд╛рдЗрдЯ"] };

const advTrans={
en:{
wheat1:"Apply nitrogen fertilizer", wheat2:"Monitor irrigation regularly",
rice1:"Keep fields flooded", rice2:"Check for pests",
general:"Follow standard crop practices", soilSandy:"Add compost to sandy soil", largeArea:"Consider hiring extra labor",
market:"Check local market prices before selling", generalTitle:"Crop Advisory", wheatTitle:"Wheat Advisory", riceTitle:"Rice Advisory"
},
hi:{
wheat1:"рдирд╛рдЗрдЯреНрд░реЛрдЬрди рдЙрд░реНрд╡рд░рдХ рд▓рдЧрд╛рдПрдВ", wheat2:"рд╕рд┐рдВрдЪрд╛рдИ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдореЙрдирд┐рдЯрд░ рдХрд░реЗрдВ",
rice1:"рдЦреЗрддреЛрдВ рдореЗрдВ рдкрд╛рдиреА рдмрдирд╛рдП рд░рдЦреЗрдВ", rice2:"рдХреАрдЯреЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ",
general:"рдорд╛рдирдХ рдлрд╕рд▓ рдкреНрд░рдерд╛рдУрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ", soilSandy:"рд░реЗрддреАрд▓реА рдорд┐рдЯреНрдЯреА рдореЗрдВ рдХрдВрдкреЛрд╕реНрдЯ рдбрд╛рд▓реЗрдВ", largeArea:"рдЕрддрд┐рд░рд┐рдХреНрдд рд╢реНрд░рдорд┐рдХ рд░рдЦрдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ",
market:"рдмреЗрдЪрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реНрдерд╛рдиреАрдп рдмрд╛рдЬрд╛рд░ рдХреА рдХреАрдорддреЗрдВ рджреЗрдЦреЗрдВ", generalTitle:"рдлрд╕рд▓ рд╕рд▓рд╛рд╣", wheatTitle:"рдЧреЗрд╣реВрдВ рд╕рд▓рд╛рд╣", riceTitle:"рдЪрд╛рд╡рд▓ рд╕рд▓рд╛рд╣"
};

// Splash hide
window.addEventListener("load",()=>{
setTimeout(()=>{document.getElementById("splash").style.display="none"; showPage("language");},1500);
});

// Show page
function showPage(id){ pages.forEach(p=>document.getElementById(p).style.display="none"); document.getElementById(id).style.display="block"; }

// Set language
function setLanguage(){
currentLang=document.getElementById("langSelect").value;
for(const key in uiTrans[currentLang]){
let el=document.getElementById(key);
if(el) el.innerText=uiTrans[currentLang][key];
}
document.getElementById("cropInput").placeholder=uiTrans[currentLang].cropPlaceholder;
let soilSelect=document.getElementById("soilSelect"); soilSelect.innerHTML="";
soilTrans[currentLang].forEach(s=>{ let opt=document.createElement("option"); opt.text=s; soilSelect.add(opt); });
showPage("home");
}

// Form advisory
const form=document.getElementById("farmerForm"); 
const list=document.getElementById("advisoryList");
form.addEventListener("submit",e=>{
e.preventDefault();
const data=Object.fromEntries(new FormData(form));
const adv=generateAdvisory(data);
list.innerHTML=adv+`<p style="margin-top:10px;font-style:italic;">${uiTrans[currentLang].thanks}</p>`;
showPage("advisories");
});

// Generate advisory with fertilizer table and quantity
function generateAdvisory(data){
let tips=[], cropLower=data.crop.toLowerCase();
if(cropLower.includes(currentLang==='hi'?'рдЧреЗрд╣реВрдВ':'wheat')) tips.push(advTrans[currentLang].wheat1,advTrans[currentLang].wheat2);
else if(cropLower.includes(currentLang==='hi'?'рдЪрд╛рд╡рд▓':'rice')) tips.push(advTrans[currentLang].rice1,advTrans[currentLang].rice2);
else tips.push(advTrans[currentLang].general,advTrans[currentLang].general);

if(data.soil.toLowerCase().includes(currentLang==='hi'?'рд░реЗрддреАрд▓реА':'sandy')) tips.push(advTrans[currentLang].soilSandy);
if(parseFloat(data.area)>5) tips.push(advTrans[currentLang].largeArea);
tips.push(advTrans[currentLang].market);

const fertilizerTable = `
<h4>${currentLang==='hi'?'рдЦрд╛рдж рддреБрд▓рдирд╛':'Fertilizer Comparison'}</h4>
<table>
<thead>
<tr>
<th>${currentLang==='hi'?'рдкреНрд░рдХрд╛рд░':'Type'}</th>
<th>${currentLang==='hi'?'рд▓рд╛рдн':'Benefits'}</th>
<th>${currentLang==='hi'?'рд╣рд╛рдирд┐':'Drawbacks'}</th>
<th>${currentLang==='hi'?'рдкреНрд░рднрд╛рд╡ рдЕрд╡рдзрд┐':'Effect Duration'}</th>
<th>${currentLang==='hi'?'рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдорд╛рддреНрд░рд╛':'Recommended Quantity'}</th>
</tr>
</thead>
<tbody>
<tr>
<td>${currentLang==='hi'?'рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдЦрд╛рдж':'Chemical Fertilizer'}</td>
<td>${currentLang==='hi'?'рддреНрд╡рд░рд┐рдд рдкреЛрд╖рдХ рдЖрдкреВрд░реНрддрд┐, рдЙрдЪреНрдЪ рдЙрдкрдЬ':'Quick nutrient supply, high yield'}</td>
<td>${currentLang==='hi'?'рдореГрджрд╛ рдЧрд┐рд░рд╛рд╡рдЯ, рдЬрд▓ рдкреНрд░рджреВрд╖рдг':'Soil degradation, water pollution'}</td>
<td>${currentLang==='hi'?'рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ (2-4 рд╕рдкреНрддрд╛рд╣)':'Short-term (2-4 weeks)'}</td>
<td>${currentLang==='hi'?'50 рдХрд┐рдЧреНрд░рд╛ рдкреНрд░рддрд┐ рдПрдХрдбрд╝':'50 kg per acre'}</td>
</tr>
<tr>
<td>${currentLang==='hi'?'рдЬреИрд╡рд┐рдХ рдЦрд╛рдж':'Organic Fertilizer'}</td>
<td>${currentLang==='hi'?'рдореГрджрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдореЗрдВ рд╕реБрдзрд╛рд░, рдЯрд┐рдХрд╛рдК':'Improves soil health, sustainable'}</td>
<td>${currentLang==='hi'?'рдзреАрдорд╛ рдкреЛрд╖рдХ рд░рд┐рд▓реАрдЬ, рддреБрд░рдВрдд рдХрдо рдЙрдкрдЬ':'Slower nutrient release, lower immediate yield'}</td>
<td>${currentLang==='hi'?'рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ (2-3 рдорд╣реАрдиреЗ)':'Long-term (2-3 months)'}</td>
<td>${currentLang==='hi'?'2 рдЯрди рдкреНрд░рддрд┐ рдПрдХрдбрд╝':'2 tons per acre'}</td>
</tr>
</tbody>
</table>
`;

let title=advTrans[currentLang].generalTitle;
if(cropLower.includes(currentLang==='hi'?'рдЧреЗрд╣реВрдВ':'wheat')) title=advTrans[currentLang].wheatTitle;
if(cropLower.includes(currentLang==='hi'?'рдЪрд╛рд╡рд▓':'rice')) title=advTrans[currentLang].riceTitle;

return `<div class='advisory'><h3>${title}</h3><ul>${tips.map(t=>`<li>${t}</li>`).join("")}</ul>${fertilizerTable}</div>`;
}

// Voice input
document.querySelectorAll("input[type=text], input[type=tel]").forEach(inp=>{ inp.addEventListener("focus",()=>activeInput=inp); });

const voiceBtn=document.getElementById("voiceButtonInline");
voiceBtn.addEventListener("click",startVoice);
function startVoice(){
if(!activeInput){ alert(currentLang==='hi'?'рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдлрд╝реАрд▓реНрдб рдкрд░ рдЯреИрдк рдХрд░реЗрдВред':'Please tap on a field to enter text via voice'); return; }
const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;
if(!SpeechRecognition){ alert("Voice input not supported!"); return; }
let recognition=new SpeechRecognition();
recognition.lang=currentLang==='hi'?'hi-IN':'en-US';
recognition.interimResults=false; recognition.maxAlternatives=1;
voiceBtn.classList.add("listening");
recognition.start();
recognition.onresult=function(event){ activeInput.value=event.results[0][0].transcript; voiceBtn.classList.remove("listening"); };
recognition.onerror=function(){ voiceBtn.classList.remove("listening"); alert("Voice recognition error"); };
}

// Dark mode toggle
document.getElementById("darkToggle").addEventListener("click",()=>document.body.classList.toggle("dark"));

// Corner language change
document.getElementById("langCorner").addEventListener("click",()=>showPage("language"));

</script>

</body>
</html>
